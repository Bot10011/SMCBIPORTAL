import React, { useState, useRef, useEffect, useMemo, useCallback } from 'react';
import html2canvas from 'html2canvas';
import jsPDF from 'jspdf';
import './Prospectus.css';
import { motion } from 'framer-motion';
import { supabase } from '../lib/supabase';
import { useAuth } from '../contexts/AuthContext';

const Prospectus: React.FC = () => {
  const { user } = useAuth();
  const [isFlipped, setIsFlipped] = useState(false);
  const [isDownloading, setIsDownloading] = useState(false);
  const [subjects, setSubjects] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);
  const frontCardRef = useRef<HTMLDivElement>(null);
  const backCardRef = useRef<HTMLDivElement>(null);

  // Types for better type safety
  interface Subject {
    id: string;
    code: string;
    name: string;
    units: number;
    year_level: string;
    prerequisite?: string;
  }

  interface Enrollment {
    school_year: string;
    semester: string;
    subject: Subject;
  }

  // Memoized data processing
  const groupedSubjects = useMemo(() => {
    const grouped: Record<string, Record<string, Subject[]>> = {};
    subjects.forEach((enrollment: any) => {
      const year = enrollment.school_year || 'Unknown Year';
      const sem = enrollment.semester || 'Unknown Semester';
      if (!grouped[year]) grouped[year] = {};
      if (!grouped[year][sem]) grouped[year][sem] = [];
      grouped[year][sem].push(enrollment.subject);
    });
    return grouped;
  }, [subjects]);

  // Memoized handlers
  const handleCardDoubleClick = useCallback(() => {
    setIsFlipped(!isFlipped);
  }, [isFlipped]);

  const downloadAsPDF = useCallback(async () => {
    setIsDownloading(true);
    try {
      const pdf = new jsPDF('p', 'mm', 'a4');
      
      // Download front side
      if (frontCardRef.current) {
        const docEl = frontCardRef.current.querySelector('.prospectus-document') as HTMLDivElement;
        const prevStyle = setDocumentFullHeight(docEl);
        applyDownloadMode(docEl);
        
        // Wait for styles to apply
        await new Promise(resolve => setTimeout(resolve, 100));
        
        const canvas = await html2canvas(docEl, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#2c3e50',
          logging: false,
          removeContainer: true,
          width: docEl.scrollWidth,
          height: docEl.scrollHeight,
          scrollX: 0,
          scrollY: 0,
          windowWidth: docEl.scrollWidth,
          windowHeight: docEl.scrollHeight
        });
        
        restoreDocumentStyle(docEl, prevStyle);
        removeDownloadMode(docEl);
        
        const imgData = canvas.toDataURL('image/png');
        const imgWidth = 210; // A4 width in mm
        const imgHeight = (canvas.height * imgWidth) / canvas.width;
        pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
        
        // Add new page for back side
        if (backCardRef.current) {
          const docEl2 = backCardRef.current.querySelector('.prospectus-document') as HTMLDivElement;
          const prevStyle2 = setDocumentFullHeight(docEl2);
          applyDownloadMode(docEl2);
          
          // Wait for styles to apply
          await new Promise(resolve => setTimeout(resolve, 100));
          
          const canvas2 = await html2canvas(docEl2, {
            scale: 2,
            useCORS: true,
            allowTaint: true,
            backgroundColor: '#2c3e50',
            logging: false,
            removeContainer: true,
            width: docEl2.scrollWidth,
            height: docEl2.scrollHeight,
            scrollX: 0,
            scrollY: 0,
            windowWidth: docEl2.scrollWidth,
            windowHeight: docEl2.scrollHeight
          });
          
          restoreDocumentStyle(docEl2, prevStyle2);
          removeDownloadMode(docEl2);
          
          const imgData2 = canvas2.toDataURL('image/png');
          const imgHeight2 = (canvas2.height * imgWidth) / canvas2.width;
          pdf.addPage();
          pdf.addImage(imgData2, 'PNG', 0, 0, imgWidth, imgHeight2);
        }
        
        pdf.save('BSIT-Prospectus-2020-2021.pdf');
      }
    } catch (error) {
      console.error('Error generating PDF:', error);
      alert('Failed to download PDF. Please try again.');
    } finally {
      setIsDownloading(false);
    }
  }, [frontCardRef, backCardRef]);

  const downloadAsImage = useCallback(async () => {
    setIsDownloading(true);
    try {
      if (frontCardRef.current) {
        const docEl = frontCardRef.current.querySelector('.prospectus-document') as HTMLDivElement;
        const prevStyle = setDocumentFullHeight(docEl);
        applyDownloadMode(docEl);
        
        // Wait for styles to apply
        await new Promise(resolve => setTimeout(resolve, 100));
        
        const canvas = await html2canvas(docEl, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#2c3e50',
          width: docEl.scrollWidth,
          height: docEl.scrollHeight,
          scrollX: 0,
          scrollY: 0,
          windowWidth: docEl.scrollWidth,
          windowHeight: docEl.scrollHeight
        });
        
        restoreDocumentStyle(docEl, prevStyle);
        removeDownloadMode(docEl);
        
        const link = document.createElement('a');
        link.download = 'BSIT-Prospectus-Page1.png';
        link.href = canvas.toDataURL();
        link.click();
      }
    } catch (error) {
      console.error('Error generating image:', error);
      alert('Failed to download image. Please try again.');
    } finally {
      setIsDownloading(false);
    }
  }, [frontCardRef]);

  useEffect(() => {
    const fetchSubjects = async () => {
      if (!user?.id) return;
      setLoading(true);
      try {
        const { data, error } = await supabase
          .from('enrollcourse')
          .select(`school_year, semester, subject:subjects(id, code, name, units, year_level, prerequisite)`) // join with subjects
          .eq('student_id', user.id)
          .eq('status', 'active');
        if (!error && data) {
          setSubjects(data);
        }
      } catch (error) {
        console.error('Error fetching subjects:', error);
      } finally {
        setLoading(false);
      }
    };
    fetchSubjects();
  }, [user?.id]);

  // Helper to group by school_year and semester
  const groupBySchoolYearAndSemester = (enrollments: any[]) => {
    const grouped: Record<string, Record<string, any[]>> = {};
    enrollments.forEach(enrollment => {
      const year = enrollment.school_year || 'Unknown Year';
      const sem = enrollment.semester || 'Unknown Semester';
      if (!grouped[year]) grouped[year] = {};
      if (!grouped[year][sem]) grouped[year][sem] = [];
      grouped[year][sem].push(enrollment.subject);
    });
    return grouped;
  };

  const setDocumentFullHeight = (doc: HTMLDivElement | null) => {
    if (!doc) return { height: '', maxHeight: '', overflowY: '' };
    const prev = {
      height: doc.style.height,
      maxHeight: doc.style.maxHeight,
      overflowY: doc.style.overflowY,
    };
    doc.style.height = 'auto';
    doc.style.maxHeight = 'none';
    doc.style.overflowY = 'visible';
    return prev;
  };

  const restoreDocumentStyle = (doc: HTMLDivElement | null, prev: { height: string, maxHeight: string, overflowY: string }) => {
    if (!doc) return;
    doc.style.height = prev.height;
    doc.style.maxHeight = prev.maxHeight;
    doc.style.overflowY = prev.overflowY;
  };

  const applyDownloadMode = (doc: HTMLDivElement | null) => {
    if (!doc) return;
    doc.classList.add('download-mode');
  };

  const removeDownloadMode = (doc: HTMLDivElement | null) => {
    if (!doc) return;
    doc.classList.remove('download-mode');
  };



  // Loading skeleton component
  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br via-white to-blue-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          {/* Header Skeleton */}
          <motion.div
            initial={{ opacity: 0, y: 24 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-50 via-white to-purple-50 border border-blue-100 mb-8"
          >
            <div className="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4 min-h-[110px] flex items-center w-full">
              <div className="flex items-center gap-4 w-full justify-between">
                <div className="flex items-center gap-3">
                  <div className="p-2 rounded-lg bg-white/20 backdrop-blur-sm">
                    <div className="w-6 h-6 bg-white/30 rounded animate-pulse"></div>
                  </div>
                  <div>
                    <div className="h-8 w-48 bg-white/20 rounded animate-pulse mb-2"></div>
                    <div className="h-4 w-64 bg-white/20 rounded animate-pulse"></div>
                  </div>
                </div>
                <div className="flex gap-2">
                  <div className="h-10 w-32 bg-white/20 rounded-lg animate-pulse"></div>
                  <div className="h-10 w-32 bg-white/20 rounded-lg animate-pulse"></div>
                </div>
              </div>
            </div>
          </motion.div>

          {/* Flip Card Skeleton */}
          <div className="flip-card-container">
            <div className="flip-card">
              <div className="flip-card-front">
                <div className="page-indicator">Page 1</div>
                <div className="prospectus-document">
                  {/* Header Skeleton */}
                  <div className="document-header">
                    <div className="header-content">
                      <div className="logo-section">
                        <div className="logo-seal">
                          <div className="w-20 h-20 bg-gray-200 rounded-full animate-pulse"></div>
                        </div>
                      </div>
                      <div className="institution-info">
                        <div className="h-6 w-64 bg-gray-200 rounded animate-pulse mb-2"></div>
                        <div className="h-4 w-48 bg-gray-200 rounded animate-pulse mb-1"></div>
                        <div className="h-4 w-56 bg-gray-200 rounded animate-pulse mb-2"></div>
                        <div className="h-5 w-72 bg-gray-200 rounded animate-pulse mb-1"></div>
                        <div className="h-4 w-40 bg-gray-200 rounded animate-pulse"></div>
                      </div>
                    </div>
                  </div>
                  
                  {/* Table Skeleton */}
                  <div className="space-y-4">
                    {[1, 2].map(i => (
                      <div key={i}>
                        <div className="h-5 w-32 bg-gray-200 rounded animate-pulse mb-3"></div>
                        <div className="h-4 w-24 bg-gray-200 rounded animate-pulse mb-2"></div>
                        <div className="prospectus-table">
                          <div className="h-8 bg-gray-200 rounded animate-pulse mb-2"></div>
                          {[1, 2, 3].map(j => (
                            <div key={j} className="h-6 bg-gray-100 rounded animate-pulse mb-1"></div>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br via-white to-blue-50">
      {/* Premium Header Section */}
      <motion.div
        initial={{ opacity: 0, y: 24 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-50 via-white to-purple-50 border border-blue-100"
      >
      <div className="mb-8 max-w-7xl mx-auto">
        <div className="relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-50 via-white to-purple-50  border border-blue-100 w-full">
          <div className="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4 min-h-[110px] flex items-center w-full">
            <div className="flex items-center gap-4 w-full justify-between">
              <div className="flex items-center gap-3">
                <div className="p-2 rounded-lg bg-white/20 backdrop-blur-sm flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-6 h-6 text-white"><path strokeLinecap="round" strokeLinejoin="round" d="M12 6v6h4.5m4.5 0A9 9 0 11 3 12a9 9 0 0118 0z" /></svg>
                </div>
                <div>
                  <h1 className="text-2xl font-bold text-white tracking-tight">Academic Prospectus</h1>
                  <p className="text-white/80 text-sm font-medium">Bachelor of Science in Information Technology (BSIT)</p>
                </div>
              </div>
              <div className="flex gap-2">
                <button 
                  onClick={downloadAsPDF}
                  disabled={isDownloading}
                  className="prospectus-download-button px-4 py-2 bg-white rounded-lg border border-gray-200 shadow-inner flex items-center gap-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"
                >
                  {isDownloading ? 'Generating PDF...' : 'Download PDF'}
                </button>
                <button 
                  onClick={downloadAsImage}
                  disabled={isDownloading}
                  className="prospectus-download-button px-4 py-2 bg-white rounded-lg border border-gray-200 shadow-inner flex items-center gap-2 text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors"
                >
                  {isDownloading ? 'Generating Image...' : 'Download Image'}
                </button>
              </div>
            </div>
            
          </div>
        </div>
      </div>
      </motion.div>
      
      <div className="flip-card-container">
        <div 
          className={`prospectus-flip-card flip-card ${isFlipped ? 'flipped' : ''}`}
          onDoubleClick={handleCardDoubleClick}
        >
          {/* Front Side */}
          <div className="flip-card-front" ref={frontCardRef}>
            <div className="page-indicator">Page 1</div>
            <div className="prospectus-document">
              {/* Header Section */}
              <div className="document-header">
                <div className="header-content">
                  <div className="logo-section">
                    <div className="logo-seal">
                      <img src="/img/logo.png" alt="St. Mary's College Logo" className="logo-image" />
                    </div>
                  </div>
                  <div className="institution-info">
                    <h2>St. Mary's College of Bansalan, Inc.</h2>
                    <p className="former-name">(Formerly: Holy Cross of Bansalan College, Inc.)</p>
                    <p className="address">Dahlia Street, Poblacion Uno, Bansalan, Davao del Sur, 8005 Philippines</p>
                    <h3>Bachelor of Science in Information Technology (BSIT)</h3>
                    <p className="effective-date">Effective SY 2020 - 2021</p>
                  </div>
                </div>
              </div>
              {/* Dynamic School Year/Semester Sections */}
              {Object.entries(groupedSubjects).map(([schoolYear, semesters]) => (
                <div key={schoolYear}>
                  <h4 className="year-header">{schoolYear}</h4>
                  {Object.entries(semesters).map(([sem, subs]) => (
                    <div key={sem}>
                      <h5 className="semester-header">{sem}</h5>
                      <table className="prospectus-table">
                        <thead>
                          <tr>
                            <th>Code</th>
                            <th>Name</th>
                            <th>Units</th>
                            <th>Prerequisite</th>
                          </tr>
                        </thead>
                        <tbody>
                          {subs.map(subj => (
                            <tr key={subj.id}>
                              <td>{subj.code}</td>
                              <td>{subj.name}</td>
                              <td>{subj.units}</td>
                              <td>{subj.prerequisite || '-'}</td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                    </div>
                  ))}
                </div>
              ))}
            </div>
          </div>

          {/* Back Side */}
          <div className="flip-card-back" ref={backCardRef}>
            <div className="page-indicator">Page 2</div>
            <div className="prospectus-document">
              {/* Header Section */}
              <div className="document-header">
                <div className="header-content">
                  <div className="logo-section">
                    <div className="logo-seal">
                      <img src="/img/logo.png" alt="St. Mary's College Logo" className="logo-image" />
                    </div>
                  </div>
                  <div className="institution-info">
                    <h2>St. Mary's College of Bansalan, Inc.</h2>
                    <p className="former-name">(Formerly: Holy Cross of Bansalan College, Inc.)</p>
                    <p className="address">Dahlia Street, Poblacion Uno, Bansalan, Davao del Sur, 8005 Philippines</p>
                    <h3>Bachelor of Science in Information Technology (BSIT)</h3>
                    <p className="effective-date">Effective SY 2020 - 2021</p>
                  </div>
                </div>
              </div>

              {/* Summer Required */}
              <div className="semester-section">
                <h4>SUMMER REQUIRED</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>GE Elec102</td>
                      <td>Entrepreneurial Mind</td>
                      <td>3</td>
                      <td>0</td>
                      <td>3</td>
                      <td>None</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>Per Dev</td>
                      <td>Social Grace and Etiquette</td>
                      <td>3</td>
                      <td>0</td>
                      <td>3</td>
                      <td>None</td>
                      <td>3</td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>6</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Third Year - First Semester */}
              <div className="semester-section">
                <h4>Third Year - FIRST SEMESTER</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>IT 311</td>
                      <td>E-Commerce</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 312</td>
                      <td>Networking 2</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>IT 222</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 313</td>
                      <td>Integrative Programming and Technologies 1</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 314</td>
                      <td>Information Assurance and Security 2</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>IT 221</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 315</td>
                      <td>System Analysis and Design</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 316</td>
                      <td>Quantitative Methods (incl. Modeling & Simulation)</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>GE Elec 103</td>
                      <td>Reading Visual Arts</td>
                      <td>3</td>
                      <td>0</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>3</td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>21</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Third Year - Second Semester */}
              <div className="semester-section">
                <h4>Third Year - SECOND SEMESTER</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>IT 321</td>
                      <td>System Integration and Architecture 1</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>IT 315</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 322</td>
                      <td>Capstone Project and Research 1</td>
                      <td>4</td>
                      <td>2</td>
                      <td>6</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT Elective2</td>
                      <td>IT Elective 2</td>
                      <td>3</td>
                      <td>0</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 323</td>
                      <td>Social and Professional Issues</td>
                      <td>3</td>
                      <td>0</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>3</td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>15</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Summer Required */}
              <div className="semester-section">
                <h4>SUMMER REQUIRED</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>IT 401</td>
                      <td>Systems Administration and Maintenance</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT 402</td>
                      <td>Computer Graphics and Animation</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT Elective3</td>
                      <td>IT Elective 3</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>3rd yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>9</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Fourth Year - First Semester */}
              <div className="semester-section">
                <h4>Fourth Year - FIRST SEMESTER</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>IT 411</td>
                      <td>Capstone Project and Research 2</td>
                      <td>4</td>
                      <td>2</td>
                      <td>6</td>
                      <td>IT 322</td>
                      <td>5</td>
                    </tr>
                    <tr>
                      <td></td>
                      <td>IT Elective4</td>
                      <td>IT Elective 4</td>
                      <td>2</td>
                      <td>1</td>
                      <td>3</td>
                      <td>4th yr. Standing</td>
                      <td>5</td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>9</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* Fourth Year - Second Semester */}
              <div className="semester-section">
                <h4>Fourth Year - SECOND SEMESTER</h4>
                <table className="prospectus-table">
                  <thead>
                    <tr>
                      <th>GRADES</th>
                      <th colSpan={2}>SUBJECT</th>
                      <th colSpan={3}>UNITS</th>
                      <th>PRE-REQUISITE</th>
                      <th>Total Hrs./wk.</th>
                    </tr>
                    <tr>
                      <th></th>
                      <th>CODE</th>
                      <th>DESCRIPTION</th>
                      <th>LEC</th>
                      <th>LAB</th>
                      <th>Total</th>
                      <th></th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td></td>
                      <td>PRAC</td>
                      <td>Practicum (486 hours)</td>
                      <td>9</td>
                      <td>0</td>
                      <td>9</td>
                      <td>4th yr. Standing</td>
                      <td></td>
                    </tr>
                    <tr className="total-row">
                      <td colSpan={5}><strong>TOTAL UNITS</strong></td>
                      <td><strong>9</strong></td>
                      <td></td>
                      <td></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              {/* IT Electives List */}
              <div className="electives-section">
                <h4>LIST OF IT ELECTIVES</h4>
                <ul className="electives-list">
                  <li>Human Computer Interaction 2</li>
                  <li>Operating System & Platforms</li>
                  <li>Multimedia Systems</li>
                  <li>Integrative Programming and Technologies 2</li>
                  <li>Mobile Development</li>
                  <li>Applications Development & Emerging Technologies 2</li>
                  <li>Fundamentals of Data Warehousing and Data Mining</li>
                  <li>Information Management 2</li>
                  <li>Systems Integration and Architecture 2</li>
                </ul>
              </div>

              {/* Signatures Section */}
              <div className="signatures-section">
                <div className="signature-row">
                  <div className="signature-item">
                    <p><strong>Prepared by:</strong></p>
                    <p>Mr. Jhon Bryan J. Cantil, LPT</p>
                    <p>BSIT Program Head</p>
                    <div className="signature-line"></div>
                  </div>
                  <div className="signature-item">
                    <p><strong>Checked by:</strong></p>
                    <p>Ms. Sheryl O. Singkala, LPT</p>
                    <p>College Registrar</p>
                    <div className="signature-line"></div>
                  </div>
                </div>
                <div className="signature-row">
                  <div className="signature-item">
                    <p><strong>Approved by:</strong></p>
                    <p>S. Ma. Charita P. Cabunoc, RVM</p>
                    <p>VP Academics / Dean of College</p>
                    <div className="signature-line"></div>
                  </div>
                  <div className="signature-item">
                    <p><strong>Approved by:</strong></p>
                    <p>S. Ma. Fe D. Gerodias, RVM</p>
                    <p>School President</p>
                    <div className="signature-line"></div>
                  </div>
                </div>
                <div className="stamp-section">
                  <div className="stamp">CONFORME NOTED</div>
                  <p>7/15/2020</p>
                </div>
              </div>

              {/* Footer */}
              <div className="document-footer">
                <div className="footer-left">
                  <p>Based on CMO No. 25, Series 2015</p>
                  <p>BSIT-ACAD-P001</p>
                </div>
                <div className="footer-right">
                  <p>Rev. 0</p>
                  <p>2</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="prospectus-instructions">
        <p>Double-click on the card to flip and view the complete prospectus</p>
      </div>
    </div>
  );
};

export default Prospectus;
